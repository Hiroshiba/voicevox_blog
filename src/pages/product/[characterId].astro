---
/**
 * キャラクターごとの製品ページ
 */

import { characterEntries, characterKeys } from "@/constants/characterEntry";
import { characterInfos } from "@/constants/characterInfo";
import Base from "@/layouts/Base.astro";
import SoftwareFeature from "@/pages/_SoftwareFeature.astro";
import type { GetStaticPaths, InferGetStaticPropsType } from "astro";
import { Image } from "astro:assets";
import TopContainer from "./_TopContainer.astro";
import { buildDescription } from "./constants";
import featureImage from "./feature.png";

export const getStaticPaths = (async () =>
  characterKeys.map((key) => ({
    params: { characterId: characterEntries[key].id },
    props: { characterKey: key, characterInfo: characterInfos[key] },
  }))) satisfies GetStaticPaths;
type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { characterKey, characterInfo } = Astro.props;

const description = buildDescription(characterInfo);
---

<Base
  title={`VOICEVOX ${characterInfo.name} | 無料のテキスト読み上げソフトウェア`}
  description={description}
  image={characterInfo.productShareImage}
  imageAlt={characterInfo.productShareImage ? "" : undefined}
>
  <main class="product">
    <div class="section py-0">
      <TopContainer {characterKey} />
    </div>

    <section class="section">
      <div
        class="feature section"
        style={{
          display: "flex",
          flexDirection: "column",
          alignItems: "center",
        }}
      >
        <div class="separator">
          <h2 class="separator-text title is-size-2 !font-bold px-5">
            VOICEVOX
          </h2>
        </div>
        <h3 class="separator-text is-size-5 !font-bold mt-5">
          無料で使える中品質なテキスト読み上げソフトウェア
        </h3>

        <div class="feature-content">
          <Image
            src={featureImage}
            alt="VOICEVOXのソフトウェアの画面のスクリーンショット画像"
            class="thumb"
            style={{ display: "block", objectFit: "contain" }}
          />
          <div class="description">
            <SoftwareFeature />
          </div>
        </div>
      </div>
    </section>
  </main>
</Base>

<style lang="scss" is:global>
  @use "@/styles/vars.scss" as *;
  @use "@/styles/helper.scss" as *;

  .product {
    .feature {
      margin-top: 1.5rem !important;
      margin-bottom: 1.5rem !important;
      padding-top: 1.5rem !important;
      padding-bottom: 1.5rem !important;

      @media screen and (max-width: 768px) {
        margin-top: 0 !important;
        margin-bottom: 0 !important;
      }

      .separator {
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;

        position: relative;

        // 横線
        &:before {
          content: "";
          position: absolute;
          top: 50%;
          left: 0;
          right: 0;
          width: 100%;
          border-top: 5px solid;
          border-color: $primary;
          z-index: -1;
        }

        .separator-text {
          background-color: white;
        }
      }

      .feature-content {
        width: 100%;
        display: flex;
        justify-content: space-evenly;
        margin-top: 3rem !important;

        @media screen and (max-width: 768px) {
          flex-direction: column;
          gap: 2rem;
        }

        .thumb {
          width: 50%;
          border: 1.5px solid;
          margin-left: 3rem !important;

          @media screen and (max-width: 768px) {
            width: 100%;
            margin-left: 0 !important;
          }
        }

        .description {
          width: 40%;
          display: flex;
          justify-content: center;
          align-items: center;
          @media screen and (max-width: 768px) {
            width: 100%;
          }
        }
      }
    }
  }
</style>
